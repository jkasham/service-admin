(this["webpackJsonpservice-admin"]=this["webpackJsonpservice-admin"]||[]).push([[0],{27:function(e,a,t){e.exports=t(46)},32:function(e,a,t){},35:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){},44:function(e,a,t){},45:function(e,a,t){},46:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(19),c=t.n(r),s=(t(32),t(2)),i=t(8),m=function(){return l.a.createElement("h1",null,"Hello, welcome to ServiceAdmin")},o=t(5),u=t.n(o),d=t(12),E=t(9),p=t(3),v=t(20),b=(t(35),function(e){var a=e.columns,t=e.data,n=Object(v.useTable)({columns:a,data:t,disableSortRemove:!0},v.useSortBy),r=n.getTableProps,c=n.getTableBodyProps,s=n.headerGroups,i=n.rows,m=n.prepareRow;return l.a.createElement("div",{className:"grid"},l.a.createElement("table",Object.assign({className:"gridContent__table"},r()),l.a.createElement("thead",null,s.map((function(e){return l.a.createElement("tr",Object.assign({className:"gridHeader__row"},e.getHeaderGroupProps()),e.headers.map((function(e){return l.a.createElement("th",Object.assign({className:"gridHeader__cell ".concat(e.isSorted?e.isSortedDesc?"descending":"ascending":"")},e.getHeaderProps(e.getSortByToggleProps())),l.a.createElement("div",{className:"headerContentItem"},e.render("Header")))})))}))),l.a.createElement("tbody",c(),i.map((function(e){return m(e),l.a.createElement("tr",Object.assign({className:"gridRow"},e.getRowProps()),e.cells.map((function(e){return l.a.createElement("td",Object.assign({className:"gridRow__cell"},e.getCellProps()),e.render("Cell"))})))})))))}),N=function(){var e=Object(n.useState)([]),a=Object(p.a)(e,2),t=(a[0],a[1]),r=Object(n.useState)([]),c=Object(p.a)(r,2),i=c[0],m=c[1],o=Object(n.useState)(!1),v=Object(p.a)(o,2),N=v[0],f=v[1],h=l.a.useMemo((function(){return[{Header:"Display Name",accessor:"display_name",Cell:function(e){return function(e){return l.a.createElement(s.b,{to:"/customer/".concat(e.row.id)},e.value)}(e)}},{Header:"Phone Number",accessor:"phone"},{Header:"Email Address",accessor:"email"}]}),[]);return Object(n.useEffect)((function(){console.log("FETCH CUST DATA"),function(){var e=Object(E.a)(u.a.mark((function e(){var a,n,l,r,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/customers");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t(n.QueryResponse.Customer),l=[],r=Object(d.a)(n.QueryResponse.Customer);try{for(r.s();!(c=r.n()).done;)s=c.value,i={display_name:s.DisplayName,phone:s.PrimaryPhone.FreeFormNumber,email:s.PrimaryEmailAddr.Address,id:s.Id},l.push(i)}catch(o){r.e(o)}finally{r.f()}m(l),f(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),N?l.a.createElement(b,{columns:h,data:i}):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Customer List"),l.a.createElement("p",null,"Loading..."))},f=function(){return l.a.createElement("h1",null,"Contractor List")},h=function(){return l.a.createElement("h1",null,"Workorder List")},g=(t(41),t(42),function(){var e=Object(n.useState)(!1),a=Object(p.a)(e,2),t=a[0],r=a[1];function c(e){e.preventDefault(),document.removeEventListener("click",c),r(!1)}return Object(n.useEffect)((function(){t?console.log("DROPDOWN: active"):console.log("DROPDOWN: inactive")})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"user-profile-corner"},l.a.createElement(s.b,{to:"#","data-dropmenu":"profile","data-noactive":"true",className:t?"profilePictureTooltip active":"profilePictureTooltip",onClick:function(e){e.preventDefault(),t||(r(!0),document.addEventListener("click",c))}},l.a.createElement("img",{src:"/profile_120x120.jpg",alt:"profile"}),l.a.createElement("div",{className:"userInfo"},l.a.createElement("span",{className:"name","data-test":"name"},"Jamal"),l.a.createElement("span",{className:"company","data-test":"company"},"JNS Cleaning")))),t&&l.a.createElement("div",{className:"dropMenu right dropMenuVisible"},l.a.createElement("ul",{className:"headerDropMenu"},l.a.createElement("li",null,l.a.createElement(s.b,{to:"/users/details/138200"},l.a.createElement("span",null,"User profile"))),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/settings"},l.a.createElement("span",null,"Settings"))),l.a.createElement("li",{className:"dropMenuSeparator"}),l.a.createElement("li",null,l.a.createElement(s.b,{onClick:function(){window.location="http://localhost:8000/auth/logout"}},l.a.createElement("span",null,"Log out"))))))}),w=function(){return l.a.createElement("nav",null,l.a.createElement(g,null),l.a.createElement("div",{className:"menuWrapper"},l.a.createElement("div",{id:"mainmenu",className:"clearfix"},l.a.createElement("menu",{className:"mainmenu"},l.a.createElement("div",{className:"logo_container"},l.a.createElement("h1",{className:"logo"},l.a.createElement(s.b,{to:"/"},"Serviceadmin"))),l.a.createElement("div",{id:"search-spinner"}),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/"},l.a.createElement("span",{className:"label"},"Home"))),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/customers"},l.a.createElement("span",{className:"label"},"Customers"))),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/contractors"},l.a.createElement("span",{className:"label"},"Contractors"))),l.a.createElement("li",null,l.a.createElement(s.b,{to:"/workorders"},l.a.createElement("span",{className:"label"},"Work Orders")))))),l.a.createElement("div",{className:"clearfix"}))},C=(t(43),function(e){var a=e.customerInfo,t=e.customerIncome;return l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"widget fieldsView"},l.a.createElement("div",{className:"columnTitle"},l.a.createElement("span",{className:"columnItem"},"Details")),l.a.createElement("div",{className:"fieldsList"},l.a.createElement("div",{className:"item read varcharField editable"},l.a.createElement("div",{className:"labelWrap clearfix"},l.a.createElement("span",{className:"label"},"Name")),l.a.createElement("div",{className:"valueWrap singleRow clearfix"},l.a.createElement("span",{className:"value"},a.display_name))),l.a.createElement("div",{className:"item read varcharField editable"},l.a.createElement("div",{className:"labelWrap clearfix"},l.a.createElement("span",{className:"label"},"Address")),l.a.createElement("div",{className:"valueWrap singleRow clearfix"},l.a.createElement("span",{className:"value"},"432 Fairfax Dr. Ann Arbor MI"))),l.a.createElement("div",{className:"item read varcharField editable"},l.a.createElement("div",{className:"labelWrap clearfix"},l.a.createElement("span",{className:"label"},"Phone")),l.a.createElement("div",{className:"valueWrap singleRow clearfix"},l.a.createElement("span",{className:"value"},a.phone))),l.a.createElement("div",{className:"item read varcharField editable"},l.a.createElement("div",{className:"labelWrap clearfix"},l.a.createElement("span",{className:"label"},"Email")),l.a.createElement("div",{className:"valueWrap singleRow clearfix"},l.a.createElement("span",{className:"value"},a.email))))),l.a.createElement("div",{className:"widget"},l.a.createElement("div",{className:"columnTitle"},l.a.createElement("span",{className:"columnItem"},"Overview")),l.a.createElement("div",{className:"charts"},l.a.createElement("div",{className:"barChart"},l.a.createElement("h3",{className:"chartTitle"},"Sales"),l.a.createElement("div",{className:"bars"},l.a.createElement("div",{className:"bar"},l.a.createElement("div",{className:"barContent"}))),l.a.createElement("div",{className:"legend"},l.a.createElement("div",{className:"labelWrap"},l.a.createElement("span",{className:"label"},"Total")),l.a.createElement("div",{className:"valueWrap singleRow"},l.a.createElement("span",{className:"value"},t.income)))),l.a.createElement("div",{className:"barChart"},l.a.createElement("h3",{className:"chartTitle"},"Expenses"),l.a.createElement("div",{className:"bars"},l.a.createElement("div",{className:"bar"},l.a.createElement("div",{className:"barContent"}))),l.a.createElement("div",{className:"legend"},l.a.createElement("div",{className:"labelWrap"},l.a.createElement("span",{className:"label"},"Total")),l.a.createElement("div",{className:"valueWrap singleRow"},l.a.createElement("span",{className:"value"},t.expense)))))))}),O=t(13),y=t(14),j=t(17),x=t(15),T=function(e){Object(j.a)(t,e);var a=Object(x.a)(t);function t(){var e;Object(O.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).onClick=function(){var a=e.props,t=a.label;(0,a.onClick)(t)},e}return Object(y.a)(t,[{key:"render",value:function(){var e=this.onClick,a=this.props,t=a.activeTab,n=a.label,r="tab-list-item";return t===n&&(r+=" active"),l.a.createElement("li",{className:r,onClick:e},l.a.createElement("a",{href:"#"},l.a.createElement("span",{className:"headers__tab__title"},n)))}}]),t}(n.Component),k=function(e){Object(j.a)(t,e);var a=Object(x.a)(t);function t(e){var n;return Object(O.a)(this,t),(n=a.call(this,e)).onClickTabItem=function(e){n.setState({activeTab:e})},n.state={activeTab:n.props.children[0].props.label},n}return Object(y.a)(t,[{key:"render",value:function(){var e=this.onClickTabItem,a=this.props.children,t=this.state.activeTab;return l.a.createElement("div",{className:"tabsWrapper"},l.a.createElement("div",{className:"tabs"},l.a.createElement("ul",{className:"headers"},a.map((function(a){var n=a.props.label;return l.a.createElement(T,{activeTab:t,key:n,label:n,onClick:e})}))),l.a.createElement("div",{className:"content"},a.map((function(e){if(e.props.label===t)return e.props.children})))))}}]),t}(n.Component),S=(t(44),function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}),A=function(e){var a=new Date;return 0==e.balance?{backgroundColor:"#08a742"}:a>new Date(e.due_date)?{backgroundColor:"#f94839"}:void 0},D=function(e){var a=e.id,t=Object(n.useState)([]),r=Object(p.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)(!1),m=Object(p.a)(i,2),o=(m[0],m[1]);return Object(n.useEffect)((function(){console.log("FETCH CUST DATA"),function(){var e=Object(E.a)(u.a.mark((function e(){var t,n,l,r,c,i,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/customer/:".concat(a,"/invoice/list"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,l=[],r=Object(d.a)(n.QueryResponse.Invoice);try{for(r.s();!(c=r.n()).done;)i=c.value,m={invoice_id:i.Id,due_date:i.DueDate,total:i.TotalAmt,balance:i.Balance},l.push(m)}catch(u){r.e(u)}finally{r.f()}s(l),o(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),l.a.createElement(k,null,l.a.createElement("div",{label:"Invoices"},l.a.createElement("div",{className:"tabContent"},l.a.createElement("div",{className:"listWrapper"},l.a.createElement("div",{className:"listHeader"},l.a.createElement("div",{className:"listHeaderCell"},"INVOICE NUMBER"),l.a.createElement("div",{className:"listHeaderCell"},"DUE DATE"),l.a.createElement("div",{className:"listHeaderCell",style:{textAlign:"right"}},"BALANCE"),l.a.createElement("div",{className:"listHeaderCell",style:{textAlign:"right"}},"TOTAL")),c.map((function(e,a){return l.a.createElement("div",{className:"listRow",key:e.invoice_id},l.a.createElement("div",{className:"listCell"},l.a.createElement("div",{className:"rowType",style:A(e)},"Invoice"),e.invoice_id),l.a.createElement("div",{className:"listCell"},(t=e.due_date,new Intl.DateTimeFormat("en-US").format(new Date(t)))),l.a.createElement("div",{className:"listCell",style:{textAlign:"right"}},S(e.balance)),l.a.createElement("div",{className:"listCell",style:{textAlign:"right"}},S(e.total)));var t}))))),l.a.createElement("div",{label:"Work Orders"},l.a.createElement("div",{className:"tabContent"},"See ya later, ",l.a.createElement("em",null,"Alligator"),"!")),l.a.createElement("div",{label:"Activity"},l.a.createElement("div",{className:"tabContent"},"After 'while, ",l.a.createElement("em",null,"Crocodile"),"!")),l.a.createElement("div",{label:"Files"},l.a.createElement("div",{className:"tabContent"},"Nothing to see here, this tab is ",l.a.createElement("em",null,"extinct"),"!")))},_=(t(45),function(e){var a=e.match.params.id,t=Object(n.useState)({}),r=Object(p.a)(t,2),c=r[0],s=r[1],i=Object(n.useState)({}),m=Object(p.a)(i,2),o=m[0],d=m[1],v=Object(n.useState)(!1),b=Object(p.a)(v,2),N=(b[0],b[1]);return Object(n.useEffect)((function(){console.log("FETCH CUST DATA");var e=function(){var e=Object(E.a)(u.a.mark((function e(){var t,n,l,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/customer/".concat(a));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,l=n.Customer,r={display_name:l.DisplayName,phone:l.PrimaryPhone.FreeFormNumber,email:l.PrimaryEmailAddr.Address,id:l.Id},console.log(r),s(r),N(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(E.a)(u.a.mark((function e(){var t,n,l,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/customer/".concat(a,"/income"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,l=n.Rows.Row[0].ColData,r={income:l[1].value,expense:l[2].value,net_income:l[3].value},console.log(l),d(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),l.a.createElement("div",{className:"detailViewWrapper"},l.a.createElement("div",{className:"detailView"},l.a.createElement("div",{className:"infoBlock"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"contact icon pictureUpload"},l.a.createElement("div",{className:"mask"},l.a.createElement("svg",{className:"cui4-icon cui4-icon--blue"},l.a.createElement("svg",{id:"icon-person",viewBox:"0 0 24 24"},l.a.createElement("path",{d:"M12 12a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9zm0 2c-3 0-9 1.56-9 4.67V21h18v-2.33c0-3.1-6-4.67-9-4.67z"}))))),l.a.createElement("h1",null,c.display_name),l.a.createElement("div",{className:"spacer"}))),l.a.createElement("div",{className:"mainBlock"},l.a.createElement(C,{customerInfo:c,customerIncome:o}),l.a.createElement("div",{className:"content"},l.a.createElement(D,{id:a})))))});var W=function(){return l.a.createElement(s.a,null,l.a.createElement(w,null),l.a.createElement("div",{id:"applicationContainer"},l.a.createElement("div",{id:"application"},l.a.createElement("div",{id:"mainview",className:"viewContainer"},l.a.createElement(i.a,{path:"/",component:m,exact:!0}),l.a.createElement(i.a,{path:"/customers",component:N}),l.a.createElement(i.a,{path:"/customer/:id",component:_}),l.a.createElement(i.a,{path:"/contractors",component:f}),l.a.createElement(i.a,{path:"/workorders",component:h})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.099c26fd.chunk.js.map